StrategyTest
├── When strategy is initialized [TEST-STRATEGY-INIT]
│   ├── It should set asset correctly [TEST-STRATEGY-INIT-001]
│   ├── It should set vault correctly [TEST-STRATEGY-INIT-002]
│   ├── It should set v_token correctly [TEST-STRATEGY-INIT-003]
│   └── It should have zero totalAssets [TEST-STRATEGY-INIT-004]
├── When depositing into strategy
│   ├── Given caller is vault [TEST-STRATEGY-DEPOSIT-VAULT]
│   │   ├── It should transfer assets from vault [TEST-STRATEGY-DEPOSIT-VAULT-001]
│   │   ├── It should deposit into VToken [TEST-STRATEGY-DEPOSIT-VAULT-002]
│   │   ├── It should update lastReportedAssets [TEST-STRATEGY-DEPOSIT-VAULT-003]
│   │   └── It should emit Deposited event [TEST-STRATEGY-DEPOSIT-VAULT-004]
│   ├── Given amount is zero [TEST-STRATEGY-DEPOSIT-ZERO]
│   │   └── It should return 0 [TEST-STRATEGY-DEPOSIT-ZERO-001]
│   └── Given caller not vault [TEST-STRATEGY-DEPOSIT-UNAUTHORIZED]
│       └── It should revert with CallerNotVault [TEST-STRATEGY-DEPOSIT-UNAUTHORIZED-001]
├── When withdrawing from strategy
│   ├── Given caller is vault [TEST-STRATEGY-WITHDRAW-VAULT]
│   │   ├── It should withdraw from VToken [TEST-STRATEGY-WITHDRAW-VAULT-001]
│   │   ├── It should transfer assets to vault [TEST-STRATEGY-WITHDRAW-VAULT-002]
│   │   ├── It should update lastReportedAssets [TEST-STRATEGY-WITHDRAW-VAULT-003]
│   │   └── It should emit Withdrawn event [TEST-STRATEGY-WITHDRAW-VAULT-004]
│   ├── Given insufficient assets [TEST-STRATEGY-WITHDRAW-INSUFFICIENT]
│   │   └── It should revert with InsufficientAssets [TEST-STRATEGY-WITHDRAW-INSUFFICIENT-001]
│   └── Given caller not vault [TEST-STRATEGY-WITHDRAW-UNAUTHORIZED]
│       └── It should revert with CallerNotVault [TEST-STRATEGY-WITHDRAW-UNAUTHORIZED-001]
├── When withdraw_all is called
│   ├── Given caller is vault [TEST-STRATEGY-WITHDRAW-ALL-VAULT]
│   │   ├── It should redeem all VToken shares [TEST-STRATEGY-WITHDRAW-ALL-VAULT-001]
│   │   ├── It should transfer all to vault [TEST-STRATEGY-WITHDRAW-ALL-VAULT-002]
│   │   ├── It should reset lastReportedAssets to 0 [TEST-STRATEGY-WITHDRAW-ALL-VAULT-003]
│   │   └── It should result in totalAssets = 0 [TEST-STRATEGY-WITHDRAW-ALL-VAULT-004]
│   ├── Given caller is owner [TEST-STRATEGY-WITHDRAW-ALL-OWNER]
│   │   └── It should succeed [TEST-STRATEGY-WITHDRAW-ALL-OWNER-001]
│   └── Given caller neither vault nor owner [TEST-STRATEGY-WITHDRAW-ALL-UNAUTHORIZED]
│       └── It should revert with CallerNotVaultOrOwner [TEST-STRATEGY-WITHDRAW-ALL-UNAUTHORIZED-001]
├── When totalAssets is queried [TEST-STRATEGY-TOTAL-ASSETS]
│   ├── Given no VToken shares [TEST-STRATEGY-TOTAL-ASSETS-ZERO]
│   │   └── It should return 0 [TEST-STRATEGY-TOTAL-ASSETS-ZERO-001]
│   └── Given VToken shares exist [TEST-STRATEGY-TOTAL-ASSETS-SHARES]
│       └── It should return convertToAssets value [TEST-STRATEGY-TOTAL-ASSETS-SHARES-001]
├── When harvest is called
│   ├── Given profit since last harvest [TEST-STRATEGY-HARVEST-PROFIT]
│   │   ├── It should calculate profit correctly [TEST-STRATEGY-HARVEST-PROFIT-001]
│   │   ├── It should update lastReportedAssets [TEST-STRATEGY-HARVEST-PROFIT-002]
│   │   └── It should emit Harvested event [TEST-STRATEGY-HARVEST-PROFIT-003]
│   ├── Given loss since last harvest [TEST-STRATEGY-HARVEST-LOSS]
│   │   ├── It should calculate loss correctly [TEST-STRATEGY-HARVEST-LOSS-001]
│   │   └── It should update lastReportedAssets [TEST-STRATEGY-HARVEST-LOSS-002]
│   └── Given caller not vault or owner [TEST-STRATEGY-HARVEST-UNAUTHORIZED]
│       └── It should revert with CallerNotVaultOrOwner [TEST-STRATEGY-HARVEST-UNAUTHORIZED-001]
└── When emergency_withdraw is called
    ├── Given assets in VToken [TEST-STRATEGY-EMERGENCY-SUCCESS]
    │   ├── It should redeem all VToken shares [TEST-STRATEGY-EMERGENCY-SUCCESS-001]
    │   ├── It should transfer recovered to vault [TEST-STRATEGY-EMERGENCY-SUCCESS-002]
    │   ├── It should reset lastReportedAssets [TEST-STRATEGY-EMERGENCY-SUCCESS-003]
    │   └── It should emit EmergencyWithdrawn [TEST-STRATEGY-EMERGENCY-SUCCESS-004]
    ├── Given no assets [TEST-STRATEGY-EMERGENCY-EMPTY]
    │   └── It should return 0 and emit event [TEST-STRATEGY-EMERGENCY-EMPTY-001]
    └── Given caller not vault or owner [TEST-STRATEGY-EMERGENCY-UNAUTHORIZED]
        └── It should revert with CallerNotVaultOrOwner [TEST-STRATEGY-EMERGENCY-UNAUTHORIZED-001]
