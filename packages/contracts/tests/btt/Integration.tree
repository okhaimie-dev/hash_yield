IntegrationTest
├── When user deposits with strategy active [TEST-INT-DEPOSIT-STRATEGY] [TEST-INT-001]
│   ├── It should transfer assets to strategy [TEST-INT-DEPOSIT-STRATEGY-001]
│   ├── It should deposit into external pool [TEST-INT-DEPOSIT-STRATEGY-002]
│   ├── It should user receive correct shares [TEST-INT-DEPOSIT-STRATEGY-003]
│   └── It should vault hold no idle assets [TEST-INT-DEPOSIT-STRATEGY-004]
├── When user withdraws with strategy active [TEST-INT-WITHDRAW-STRATEGY] [TEST-INT-002]
│   ├── It should pull from strategy [TEST-INT-WITHDRAW-STRATEGY-001]
│   ├── It should user receive correct assets [TEST-INT-WITHDRAW-STRATEGY-002]
│   └── It should emit Withdraw event [TEST-INT-WITHDRAW-STRATEGY-003]
├── When multiple users deposit then yield accrues [TEST-INT-MULTI-YIELD] [TEST-INT-003]
│   ├── It should totalAssets increase [TEST-INT-MULTI-YIELD-001]
│   ├── It should share count stay same [TEST-INT-MULTI-YIELD-002]
│   ├── It should convertToAssets increase [TEST-INT-MULTI-YIELD-003]
│   └── It should no manual action required [TEST-INT-MULTI-YIELD-004]
├── When user withdraws after yield [TEST-INT-WITHDRAW-YIELD]
│   ├── It should withdraw principal plus profit share [TEST-INT-WITHDRAW-YIELD-001]
│   ├── It should vault pull from strategy [TEST-INT-WITHDRAW-YIELD-002]
│   └── It should other users unaffected [TEST-INT-WITHDRAW-YIELD-003]
├── When partial withdrawal leaves others [TEST-INT-PARTIAL-WITHDRAW]
│   ├── It should remaining users share value correct [TEST-INT-PARTIAL-WITHDRAW-001]
│   ├── It should totalAssets reduce proportionally [TEST-INT-PARTIAL-WITHDRAW-002]
│   └── It should totalSupply reduce by burned shares [TEST-INT-PARTIAL-WITHDRAW-003]
├── When strategy is switched [TEST-INT-STRATEGY-SWITCH] [TEST-INT-004]
│   ├── It should assets move from old to new [TEST-INT-STRATEGY-SWITCH-001]
│   ├── It should totalAssets remain continuous [TEST-INT-STRATEGY-SWITCH-002]
│   ├── It should no shares created or destroyed [TEST-INT-STRATEGY-SWITCH-003]
│   └── It should users balances unchanged [TEST-INT-STRATEGY-SWITCH-004]
├── When emergency withdraw mid-yield [TEST-INT-EMERGENCY-YIELD] [TEST-EMERG-001]
│   ├── It should vault pull all from strategy [TEST-INT-EMERGENCY-YIELD-001]
│   ├── It should users can redeem from vault [TEST-INT-EMERGENCY-YIELD-002]
│   ├── It should unrecoverable remain as loss [TEST-INT-EMERGENCY-YIELD-003]
│   └── It should loss shared pro-rata [TEST-INT-EMERGENCY-YIELD-004]
└── When vault with no strategy [TEST-INT-NO-STRATEGY]
    ├── It should deposits stay in vault [TEST-INT-NO-STRATEGY-001]
    ├── It should withdrawals from vault [TEST-INT-NO-STRATEGY-002]
    └── It should totalAssets equal vault balance [TEST-INT-NO-STRATEGY-003]
